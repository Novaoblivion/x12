<!--
   This file is part of the X12Parser library that provides tools to
   manipulate X12 messages using Ruby native syntax.

   Copyright (C) 2012, 2013 P&D Technical Solutions, LLC

   This library is free software; you can redistribute it and/or
   modify it under the terms of the GNU Lesser General Public
   License as published by the Free Software Foundation; either
   version 2.1 of the License, or (at your option) any later version.

   This library is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
   Lesser General Public License for more details.

   You should have received a copy of the GNU Lesser General Public
   License along with this library; if not, write to the Free Software
   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA

   $Id: 835OA.xml 2013-06-08 mjp using version 5010 $
    Non-standard implementation of the 835 transaction
    Allows for multiple ST/SE segments
-->

<Definition>
	<Loop name="277" required="y">
		<Segment name="ISA" max="1" required="y" />
		<Segment name="GS"  max="1" required="y" />
		<Loop name="L277" max="inf" comment="This X12 Transaction Set contains the format and establishes the data contents of the Professional Healthcare Status Request and Response (277) for use within the context of an Electronic Data Interchange (EDI) environment.">
			<Segment name="ST"  max="1" required="y" />
			<Segment name="BHT" max="1" required="y" comment="Beginning Hierarchical Transaction"/>
			<Loop name="L2000A" max="1" required="y" comment="Information Source Level">
				<Segment name="HL" max="1" required="y" comment="Information Source Level" />
				<Loop name="L2100A" max="1" required="y" comment="Payer Name">
					<Segment name="NM1" max="1" required="y" comment="Payer Name" />
					<Segment name="PER" max="1" required="n" comment="Payer Contact information" />
				</Loop>
				<Loop name="L2200A" max="1" required="n" comment="Transmission Receipt Control Identifier">
					<Segment name="TRN" max="1" required="n" comment="Transmission Receipt Control Identifier" />
					<Segment name="DTP" max="2" required="n" comment="Information Source Receipt Date" />
				</Loop>
			</Loop>
			<Loop name="L2000B" max="1" comment="Information Receiver Level">
				<Segment name="HL" max="1" required="y" comment="Information Receiver Level" />
				<Loop name="L2100B" max="1" comment="Information Receiver Name">
					<Segment name="NM1" max="1" required="y" comment="Information Receiver Name" />
				</Loop>
				<Loop name="L2200B" max="1" required="n" comment="Information Receiver Application Trace Identifier">
					<Segment name="TRN" max="1" required="n" comment="Transmission Application Control Identifier" />
					<Segment name="STC" max="1" required="n" comment="Information Receiver Status Information" />
					<Segment name="QTY" max="1" required="n" comment="Total Accepted Quantity" />
					<Segment name="AMT" max="1" required="n" comment="Total Accepted Amount" />
				</Loop>
			</Loop>
			<Loop name="L2000C" max="1" comment="Service Provider Level">
				<Segment name="HL" max="1" required="y" comment="Service Provider Level" />
				<Loop name="L2100C" max="1" comment="Provider Name" >
					<Segment name="NM1" max="1" required="y" comment="Provider Name" />
				</Loop>
				<Loop name="L2200C" max="1" required="n" comment="Provider Of Service Information Trace Identifier" >
					<Segment name="TRN" max="1" required="n" comment="Provider of Service Information Trace Identifier" />
					<Segment name="STC" max="1" required="n" comment="Billing Provider Status Information" />
					<Segment name="QTY" max="1" required="n" comment="Total Accepted Quantity" />
					<Segment name="AMT" max="1" required="n" comment="Total Accepted Amount" />
				</Loop>
			</Loop>
			<Loop name="L2000D" max="1" comment="Subscriber Level">
				<Segment name="HL"  max="1" required="y" comment="Subscriber Level" />
				<Segment name="DMG" max="1" required="y" comment="Subscriber Demographic Information" />
				<Loop name="L2100D" max="1" comment="Subscriber Name">
					<Segment name="NM1" max="1" required="y" comment="Subscriber Name" />
				</Loop>
				<Loop name="L2200D" max="1" comment="Claim Submitter Trace">
					<Segment name="TRN" max="1" required="y" comment="Claim Submitter Trace Number" />
					<Segment name="STC" max="1" required="y" comment="Claim Level Status Information" />
					<Segment name="REF" max="3" required="n" />
					<Segment name="DTP" max="2" required="n" comment="Claim Service Date" />
					<Loop name="L2220D" max="1" comment="Service Line Information">
						<Segment name="SVC" max="1" required="n" comment="Service Line Information" />
						<Segment name="STC" max="1" required="n" comment="Service Line Status Information" />
						<Segment name="REF" max="1" required="n" comment="Service Line Item Identifiaction" />
						<Segment name="DTP" max="1" required="Y" comment="Service Line Date" />
					</Loop>
				</Loop>
			</Loop>
			<Loop name="L2000E" max="1" comment="Dependent Level">
				<Segment name="HL"  max="1" required="n" comment="Dependent Level" />
				<Segment name="DMG" max="1" required="y" comment="Dependent Demographic Information" />
				<Loop name="L2100E" max="1" comment="Dependent Name">
					<Segment name="NM1" max="1" required="y" comment="Dependent Name" />
				</Loop>
				<Loop name="L2200E" max="1" comment="Claim Submitter Trace Number">
					<Segment name="TRN" max="1" required="y" comment="Claim Subimtter Trace Number" />
					<Segment name="STC" max="1" required="y" comment="Claim Level Status Information" />
					<Segment name="QTY" max="1" required="n" />
					<Segment name="AMT" max="1" required="n" />
					<Segment name="REF" max="3" required="y" />
					<Segment name="DTP" max="1" required="n" comment="CLaim Service Date" />
					<Loop name="L2220E" max="1" comment="Service Line Information">
						<Segment name="SVC" max="1" required="n" comment="Service Line Information" />
						<Segment name="STC" max="1" required="n" comment="Service Line Status Information" />
						<Segment name="REF" max="1" required="n" comment="Service Line Item Identification" />
						<Segment name="DTP" max="1" required="n" comment="Service Line Date" />
					</Loop>
				</Loop>
			</Loop>
			<Segment name="SE" required="y" />
		</Loop>
		<Segment name="GE"  max="1" required="y"/>
		<Segment name="IEA" max="1" required="y"/>
	</Loop>
</Definition>